name: PR Title Check
on:
  pull_request:
    types: [opened, edited, synchronize]

jobs:
  check-title:
    runs-on: ubuntu-latest
    steps:
      - name: Check PR Title Format
        run: |
          title="${{ github.event.pull_request.title }}"
          echo "üîç Checking PR title: '$title'"

          # Check if title starts with valid type (simple string matching)
          if [[ $title == feat* ]] || [[ $title == fix* ]] || [[ $title == docs* ]] || [[ $title == style* ]] || [[ $title == refactor* ]] || [[ $title == perf* ]] || [[ $title == test* ]] || [[ $title == build* ]] || [[ $title == ci* ]] || [[ $title == chore* ]] || [[ $title == revert* ]]; then
            echo "‚úÖ Valid type found"
          else
            echo "‚ùå PR title must start with a valid type"
            echo "Valid types: feat, fix, docs, style, refactor, perf, test, build, ci, chore, revert"
            echo "Example: feat: add new feature"
            exit 1
          fi

          # Check if it has colon and description
          if [[ $title == *": "* ]]; then
            echo "‚úÖ Has description after colon"
          else
            echo "‚ùå PR title must have format: type: description or type(scope): description"
            exit 1
          fi

          echo "‚úÖ PR title follows conventional commit format!"
