
# @equinor/utils 
Hooks and utility functions used internally by the `@equinor/eds-core-react` and `@equinor/eds-lab-react` packages.


## Installation 

`@equinor/utils` is included as a dependency with `@equinor/eds-core-react` and `@equinor/eds-lab-react`. It can also be installed independently in your project directory with your package manager (npm/yarn/pnpm).
```shell
npm install @equinor/eds-utils
```

## Hooks
<Story id="packages-utils--hooks" />


### useAutoResize


Used to resize `teaxtarea` element on `keyup` until the optionally provided `maxHeight`, and then adds overflow auto.

```ts
function useAutoResize(
  targetEl: HTMLElement,
  maxHeight?: number,
): void;
```

### useCombinedRefs

Can be used to combine multiple refs into a single ref, which then can then be passed to a component or DOM node.

Returns a memoized function that calls passed refs sequentially with passed element.

```ts
function useCombinedRefs(
  ...refs: Ref<T>[]
): RefCallback<T>;
```

### useGlobalKeyPress

Adds an `EventListener` on `document` for a specified key with a callback function as the second parameter. 

Currently the `KEYTYPES` supported are 
- `Escape`
- `Enter`
- `Tab`
- `ArrowDown`
- `ArrowUp`

```ts
function useGlobalKeyPress(
  targetKey: KEYTYPES,
  callback: (e: KeyboardEvent) => void,
): void;
```

### useHideBodyScroll

Removes scroll on body by adding `overflow: hidden` while `active` is `true`, and then restores overflow to its original state otherwise.

```ts
function useHideBodyScroll(
  active: boolean,
): void;
```

### useId

For creating persistent id's for use in things such as inputs and labels with the for-attribute.
`useId('test')` will return the idOverride unchanged (`test`), `useId(null)` will return an autogenerated id in the form `eds-[5 digit number]`.
`useId(null, test)` will return autogenerated id in the form `eds-test-[5 digit number]`.

```ts
function useId(
  idOverride: string,
  type?: string
): string;
```

### useMountedRef

Simply returns true if the component is rendered.

```ts
function useMountedRef(): boolean;
```

### useOutsideClick

Calls the callback when user click outside the provided element.

```ts
function useOutsideClick(
  el: HTMLElement,
  callback: (e: MouseEvent) => void,
): void;
```

### usePopper

A hook that wraps [react-popper](https://www.npmjs.com/package/react-popper). 
Used for positioning popup elements such as `Popover`, `Menu` and `Tooltip`.

```ts
type PopperParams = {
  anchorEl: HTMLElement
  popperEl: HTMLElement
  arrowRef?: HTMLElement | string
  placement?: Placement
  offset?: number
  autoWidth?: boolean
}

function usePopper({
  anchorEl = null,
  popperEl = null,
  arrowRef = null,
  placement,
  offset = 10,
  autoWidth,
}: PopperParams): {
  styles: { [key: string]: CSSProperties }
  attributes: { [key: string]: { [key: string]: string } }
};
```

### useToken

Used internally in components to fetch the correct designtoken-data based on the density prop from `EdsProvider`.

```ts
function useOutsideClick(
  options: { density: 'compact' | 'comfortable' },
  token: ComponentToken,
): void;
```
