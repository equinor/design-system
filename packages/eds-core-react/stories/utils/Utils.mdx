import { Meta } from '@storybook/addon-docs/blocks'

<Meta title="Packages/Utils" name="Utils" />

# @equinor/utils 
Hooks and utility functions used internally by the `@equinor/eds-core-react` and `@equinor/eds-lab-react` packages.


## Installation 

`@equinor/utils` is included as a dependency with `@equinor/eds-core-react` and `@equinor/eds-lab-react`. It can also be installed independently in your project directory with your package manager (npm/yarn/pnpm).
```shell
npm install @equinor/eds-utils
```

## Hooks

### useAutoResize


Used to resize `textarea` element on `keyup` until the optionally provided `maxHeight`, and then adds overflow auto.

Returns a callback ref that should be passed to the target element.

```ts
function useAutoResize<T extends HTMLElement = HTMLElement>(
  maxHeight?: number,
): RefCallback<T>;
```

### mergeRefs

This was formerly a hook called `useCombinedRefs`, but has been renamed and turned into a utility function. Can be used to combine multiple refs into a single ref, which then can then be passed to a component or DOM node.

Returns a function that calls passed refs sequentially with passed element.

```ts
function mergeRefs(
  ...refs: (MutableRefObject<T> | LegacyRef<T>)[]
): RefCallback<T>;
```

### useGlobalKeyPress

Adds an `EventListener` on `document` for a specified key with a callback function as the second parameter. 

Currently the `KEYTYPES` supported are 
- `Escape`
- `Enter`
- `Tab`
- `ArrowDown`
- `ArrowUp`

```ts
function useGlobalKeyPress(
  targetKey: KEYTYPES,
  callback: (e: KeyboardEvent) => void,
): void;
```

### useHideBodyScroll

Removes scroll on body by adding `overflow: hidden` while `active` is `true`, and then restores overflow to its original state otherwise.

```ts
function useHideBodyScroll(
  active: boolean,
): void;
```

### useId

For creating persistent id's for use in things such as inputs and labels with the for-attribute.
`useId('test')` will return the idOverride unchanged (`test`), `useId(null)` will return an autogenerated id in the form `eds-[5 digit number]`.
`useId(null, test)` will return autogenerated id in the form `eds-test-[5 digit number]`.

```ts
function useId(
  idOverride: string,
  type?: string
): string;
```

### useMountedRef

Simply returns true if the component is rendered.

```ts
function useMountedRef(): boolean;
```

### useOutsideClick

Calls the callback when user click outside the provided element.

```ts
function useOutsideClick(
  el: HTMLElement,
  callback: (e: MouseEvent) => void,
): void;
```

### useToken

Used internally in components to fetch the correct designtoken-data based on the density prop from `EdsProvider`.

```ts
function useOutsideClick(
  options: { density: 'compact' | 'comfortable' },
  token: ComponentToken,
): void;
```
