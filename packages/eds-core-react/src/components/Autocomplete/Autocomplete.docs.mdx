
import { Links, Story, PropsTable } from './../../../.storybook/components'
import * as icons from '@equinor/eds-icons'

# Autocomplete 

Allows users to choose one or multiple options from a list. The component is built using [Downshift](https://github.com/downshift-js/downshift) 

<Links 
    sourceUrl="https://github.com/equinor/design-system/blob/develop/packages/eds-core-react/src/components/Autocomplete/Autocomplete.tsx"
    npmUrl="https://www.npmjs.com/package/@equinor/eds-core-react"
/>

<Story id="inputs-autocomplete--introduction" />
<PropsTable />

## Usage

The value must be chosen from a predefined list of values.

```tsx
import { Autocomplete } from '@equinor/eds-core-react'

const options = [
  'Microsoft Corporation',
   'Tesla, Inc',
   'Apple Inc.',
]

<Autocomplete 
  label="Stocks"
  options={options}
/>
```

When passing in objects as options, make sure you define the `optionLabel` function for wanted label. This function must return a string.

```tsx

const options = [
   { label: 'Microsoft Corporation', symbol: 'MSFT' },
   { label: 'Tesla, Inc', symbol: 'TSLA' },
   { label: 'Apple Inc.', symbol: 'AAPL'},
]

<Autocomplete 
  label="Stocks"
  options={options}
  optionLabel={(option) => option.label}
/>
```

## Accessibility
The property `label` is mandatory and make sure you have a descriptive label for screen readers.

## Examples

### Multiple
Enable the `multiple` property for multiple selection of values.
<Story id="inputs-autocomplete--multiple" />

### Option label
Change the rendered & searchable value by using the `optionLabel` property.
<Story id="inputs-autocomplete--option-label" />

### Read only
<Story id="inputs-autocomplete--read-only" />

### Disabled
<Story id="inputs-autocomplete--disabled" />


### Disabled option
You can disable an option by setting the `disabled:true` on option.
<Story id="inputs-autocomplete--disabled-option" />


### Preselected options
<Story id="inputs-autocomplete--preselected-options" />


### Controlled
Downshift controls its own state internally. If you need more controll you can define the `selectedOptions` to controlled the component state. When defining your own state the initial value needs to be an empty array. This is due to how [Downshift checks whether a component is controlled or not](https://github.com/downshift-js/downshift#control-props).
<Story id="inputs-autocomplete--controlled" />

### Compact
Compact `Autocomplete` using `EdsProvider`.
<Story id="inputs-autocomplete--compact" />

### With `React Hook Form`
<Story id="inputs-autocomplete--with-react-hook-form" />

### Custom options filter
You can specify the filter predicate for options by setting the `optionsFilter` callback. By default the inputValue is checked against the option label. 
We stronlgy recommend always including all the characters a search might filter on in the label as it may seem confusing for users otherwise.
<Story id="inputs-autocomplete--custom-options-filter" />

### With Select All option
This is an example of how to make a "Select All" option for quicker selection. 
Make sure to use `useMemo` if you are mutating the options in the render function to avoid object memory references bugs on re-renders.
<Story id="inputs-autocomplete--select-all" />

### Options `autoWidth` 
<Story id="inputs-autocomplete--auto-width" />

## Options update
Story for testing if options are correctly update if changed after initialization
<Story id="inputs-autocomplete--options-update" />
