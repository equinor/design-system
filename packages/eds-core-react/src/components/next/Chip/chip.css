@layer eds-components {
  /* ===== BASE ===== */

  .eds-chip {
    display: inline-flex;
    align-items: center;
    gap: 8px;

    box-sizing: border-box;
    width: fit-content;
    height: 2rem; /* 32px */
    padding-inline: 12px;
    border: 1px solid var(--eds-color-border-medium);
    border-radius: var(--eds-spacing-border-radius-pill, 100px);

    font-family: var(--eds-typography-ui-sm-font-family, 'Equinor', sans-serif);
    font-size: 0.875rem;
    font-weight: 500;
    line-height: 1.25em;

    background: transparent;

    cursor: default;
    color: var(--eds-color-text-subtle);
    user-select: none;
  }

  /* ===== COMFORTABLE DENSITY ===== */

  [data-density='comfortable'] .eds-chip {
    height: 1.5rem; /* 24px */
    padding-inline: 8px;
    font-size: 0.75rem;
    line-height: 1.333em;
  }

  .eds-chip[role='button'],
  .eds-chip[role='radio'],
  .eds-chip[data-dropdown] {
    cursor: pointer;
  }

  .eds-chip svg {
    fill: currentcolor;
  }

  /* ===== HAS ICON (tighter start padding) ===== */

  .eds-chip[data-has-icon] {
    padding-inline-start: 4px;
    transition: padding-inline-start 150ms ease-out;
  }

  /* ===== DELETABLE (tighter end padding) ===== */

  .eds-chip[data-deletable] {
    padding-inline-end: 4px;
  }

  /* ===== DROPDOWN (tighter end padding) ===== */

  .eds-chip[data-dropdown] {
    padding-inline-end: 4px;
  }

  .eds-chip__dropdown {
    flex-shrink: 0;
    pointer-events: none;
  }

  /* ===== LEADING ICON WRAPPER ===== */

  .eds-chip__icon {
    display: inline-flex;
    flex-shrink: 0;
    align-items: center;
  }

  /* ===== CHECK ICON (animated enter + exit) ===== */

  .eds-chip__check {
    display: inline-flex;
    flex-shrink: 0;
    align-items: center;
    overflow: hidden;
    width: 0;
    opacity: 0;
    margin-inline-end: -8px; /* cancel flex gap when collapsed */
    transition:
      width 150ms ease-out,
      opacity 150ms ease-out,
      margin 150ms ease-out;
  }

  .eds-chip__check[data-active] {
    width: var(--eds-sizing-icon-xs, 16px);
    opacity: 1;
    margin-inline-end: 0;
  }

  /* ===== SELECTED (accent, subtle bg + prominent text) ===== */

  .eds-chip[data-selected] {
    color: var(--eds-color-text-strong);
    background: var(--eds-color-bg-fill-muted-default);
    border-color: transparent;
  }

  .eds-chip[data-selected] svg {
    fill: var(--eds-color-text-strong);
  }

  /* ===== DISABLED ===== */

  .eds-chip[aria-disabled='true'] {
    cursor: not-allowed;
    color: var(--eds-color-text-disabled);
    border-color: var(--eds-color-border-disabled);
  }

  .eds-chip[aria-disabled='true'] svg {
    fill: var(--eds-color-text-disabled);
  }

  .eds-chip[aria-disabled='true'][data-selected] {
    background: var(--eds-color-bg-fill-muted-disabled);
    border-color: transparent;
  }

  /* ===== FOCUS ===== */

  .eds-chip:focus {
    outline: none;
  }

  .eds-chip:focus-visible {
    outline: var(--eds-sizing-stroke-thick, 2px) dashed
      var(--eds-color-border-focus);
    outline-offset: 3px;
  }

  /* ===== DELETE BUTTON ===== */

  .eds-chip__delete {
    all: unset;

    display: inline-flex;
    align-items: center;
    justify-content: center;

    padding: 1px;
    border-radius: var(--eds-spacing-border-radius-rounded, 4px);

    cursor: pointer;

    color: inherit;
  }

  .eds-chip__delete:disabled {
    cursor: not-allowed;
  }

  /* ===== ICON/AVATAR SIZING ===== */

  .eds-chip > .icon {
    flex-shrink: 0;
  }

  /* ===== HOVER STATES ===== */

  @media (hover: hover) and (pointer: fine) {
    .eds-chip:not([aria-disabled='true']):hover {
      color: var(--eds-color-text-strong);
      border-color: var(--eds-color-border-strong);
    }

    .eds-chip:not([aria-disabled='true']):hover svg {
      fill: var(--eds-color-text-strong);
    }

    .eds-chip[data-selected]:not([aria-disabled='true']):hover {
      background: var(--eds-color-bg-fill-muted-hover);
      color: var(--eds-color-text-strong);
      border-color: transparent;
    }

    .eds-chip[data-selected]:not([aria-disabled='true']):hover svg {
      fill: var(--eds-color-text-strong);
    }

    .eds-chip__delete:not(:disabled):hover {
      background: var(--eds-color-bg-fill-muted-hover);
    }

    .eds-chip[data-selected] .eds-chip__delete:not(:disabled):hover {
      background: var(--eds-color-bg-fill-muted-active);
    }
  }
}
