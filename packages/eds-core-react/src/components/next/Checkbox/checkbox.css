/* Checkbox component - works with Field for layout
 *
 * Note on spacing tokens:
 * This component uses future Figma token names (e.g. --eds-generic-horizontal-gap,
 * --eds-selectable-spacing-inline) with fallbacks to existing tokens. Once these
 * tokens are added to eds-tokens, they will automatically take effect without
 * any code changes needed here.
 */
@layer eds-components {
  /* Variables for checkbox styling */
  .eds-checkbox {
    /* Component height from density tokens - 36px spacious, 24px comfortable */
    --_checkbox-height: var(--eds-sizing-selectable-md);
    /* Hover size from density tokens - 44px spacious, 36px comfortable */
    --_checkbox-hover-size: var(--eds-sizing-selectable-lg);
    /* Icon color - follows data-color-appearance (defaults to accent in component) */
    --_checkbox-icon-color: var(--eds-color-text-subtle);
    /* Hover color is always accent - interaction feedback, not semantic */
    --_checkbox-hover-color: var(--eds-color-bg-accent-fill-muted-hover);
    cursor: pointer;
    position: relative;
    box-sizing: border-box;
  }

  /* Standalone checkbox (no label) */
  .eds-checkbox--standalone {
    display: inline-flex;
    align-items: center;
    position: relative;
    /* Horizontal padding - uses future token with fallback */
    padding-inline: var(
      --eds-selectable-spacing-inline,
      var(--eds-spacing-horizontal-md)
    );
    min-height: var(--_checkbox-height);
    border-radius: var(--eds-spacing-border-radius-rounded);
  }

  /* When used with Field, apply Figma spacing and layout */
  .eds-field.eds-checkbox {
    /* Gap between checkbox icon and label - uses future token with fallback */
    gap: var(--eds-generic-horizontal-gap, var(--eds-spacing-horizontal-md));
    /* Horizontal padding - uses future token with fallback */
    padding-inline: var(
      --eds-selectable-spacing-inline,
      var(--eds-spacing-horizontal-md)
    );
    /* Vertical padding - uses future token with fallback */
    padding-block: var(
      --eds-selectable-spacing-stack,
      var(--eds-spacing-vertical-sm)
    );
    /* Auto width, not full width */
    width: auto;
    /* Border radius - uses future token with fallback */
    border-radius: var(
      --eds-generic-corner-radius,
      var(--eds-spacing-border-radius-rounded)
    );
    /* Min height */
    min-height: var(--_checkbox-height);
  }

  .eds-checkbox[data-disabled='true'] {
    cursor: not-allowed;
  }

  /* Checkbox input wrapper - contains the icon and hover background */
  .eds-checkbox__input-wrapper {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    position: relative;
    /* Icon is 16px, this wrapper just contains it */
    width: 16px;
    height: 16px;
    flex-shrink: 0;
  }

  /* Hover circle background - centered on the icon */
  .eds-checkbox__input-wrapper::before {
    content: '';
    position: absolute;
    /* Hover background size from density tokens */
    width: var(--_checkbox-hover-size);
    height: var(--_checkbox-hover-size);
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    border-radius: var(--eds-spacing-border-radius-pill);
    background-color: transparent;
    transition: background-color 0.2s;
  }

  @media (hover: hover) and (pointer: fine) {
    .eds-checkbox:hover .eds-checkbox__input-wrapper::before {
      background-color: var(--_checkbox-hover-color);
    }

    .eds-checkbox[data-disabled='true']:hover
      .eds-checkbox__input-wrapper::before {
      background-color: transparent;
    }
  }

  /* Native checkbox input - invisible but clickable */
  .eds-checkbox__input {
    appearance: none;
    position: absolute;
    width: 48px;
    height: 48px;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    margin: 0;
    cursor: pointer;
    z-index: 1;
  }

  .eds-checkbox__input:disabled {
    cursor: not-allowed;
  }

  .eds-checkbox__input:focus {
    outline: none;
  }

  /* Focus Frame - around the entire component */
  .eds-checkbox:has(.eds-checkbox__input:focus-visible)::after {
    content: '';
    position: absolute;
    inset: -2px;
    border: 1px solid var(--eds-color-border-focus);
    border-radius: calc(var(--eds-spacing-border-radius-rounded) + 2px);
    pointer-events: none;
  }

  /* SVG icon - 16px from Figma */
  .eds-checkbox__icon {
    position: relative;
    pointer-events: none;
    width: 16px;
    height: 16px;
    fill: var(--_checkbox-icon-color);
    flex-shrink: 0;
  }

  .eds-checkbox[data-disabled='true'] .eds-checkbox__icon {
    fill: var(--eds-color-border-neutral-medium);
  }

  /* Icon visibility logic - default state: show unchecked, hide others */
  .eds-checkbox__icon--checked,
  .eds-checkbox__icon--indeterminate {
    display: none;
  }

  .eds-checkbox__icon--unchecked {
    display: block;
  }

  /* Checked state: show checked icon, hide others */
  .eds-checkbox__input:checked ~ .eds-checkbox__icon--checked {
    display: block;
  }

  .eds-checkbox__input:checked ~ .eds-checkbox__icon--unchecked {
    display: none;
  }

  /* Indeterminate state: show indeterminate icon, hide others */
  .eds-checkbox__input[data-indeterminate='true']
    ~ .eds-checkbox__icon--indeterminate {
    display: block;
  }

  .eds-checkbox__input[data-indeterminate='true']
    ~ .eds-checkbox__icon--checked,
  .eds-checkbox__input[data-indeterminate='true']
    ~ .eds-checkbox__icon--unchecked {
    display: none;
  }

  /* Label styling - handled by Field.Label, but ensure disabled color */
  .eds-field.eds-checkbox[data-disabled='true'] .eds-field__label {
    color: var(--eds-color-border-neutral-medium);
  }

  /* Helper message: neutral by default (not accent like checkbox icon).
     When data-color-appearance is explicitly set, it follows that color. */
  .eds-field.eds-checkbox[data-color-appearance='accent'] {
    --_eds-field-helper-color: var(--eds-color-text-neutral-subtle);
  }
}
