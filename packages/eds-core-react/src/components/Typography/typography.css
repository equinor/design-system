/*
 * Registered custom property for font-size values
 * 
 * This @property declaration registers --font-size as a typed CSS custom property,
 * enabling proper unit handling in calc() expressions. This is essential for the
 * .text-icon sizing calculations, which use tan(atan2(var(--font-size), 1px)) to
 * extract the numeric value from the font-size for proportional icon scaling.
 * 
 * Without this registration, the browser would treat --font-size as an untyped string,
 * preventing the mathematical operations needed for responsive icon sizing based on
 * the current text size.
 */
@property --font-size {
  inherits: true;
  initial-value: 16px;
  syntax: <length>;
}

.font-family-ui,
.font-family-header {
  margin: 0;
}

/* Typography scale - organized by font family */
.font-family-ui {
  font-family: var(--eds-typography-ui-body-font-family), sans-serif;

  &.text-xs {
    --font-size: var(--eds-typography-ui-body-xs-font-size);
    font-size: var(--font-size);

    &.line-height-default {
      line-height: var(--eds-typography-ui-body-xs-lineheight-default);
    }

    &.line-height-squished {
      line-height: var(--eds-typography-ui-body-xs-lineheight-squished);
    }

    &.font-lighter {
      font-weight: var(--eds-typography-ui-body-xs-font-weight-lighter);
    }

    &.font-normal {
      font-weight: var(--eds-typography-ui-body-xs-font-weight-normal);
    }

    &.font-bolder {
      font-weight: var(--eds-typography-ui-body-xs-font-weight-bolder);
    }

    &.tracking-tight {
      letter-spacing: var(--eds-typography-ui-body-xs-tracking-tight);
    }

    &.tracking-normal {
      letter-spacing: var(--eds-typography-ui-body-xs-tracking-normal);
    }

    &.tracking-wide {
      letter-spacing: var(--eds-typography-ui-body-xs-tracking-loose);
    }
  }

  &.text-sm {
    --font-size: var(--eds-typography-ui-body-sm-font-size);
    font-size: var(--font-size);

    &.line-height-default {
      line-height: var(--eds-typography-ui-body-sm-lineheight-default);
    }

    &.line-height-squished {
      line-height: var(--eds-typography-ui-body-sm-lineheight-squished);
    }

    &.font-lighter {
      font-weight: var(--eds-typography-ui-body-sm-font-weight-lighter);
    }

    &.font-normal {
      font-weight: var(--eds-typography-ui-body-sm-font-weight-normal);
    }

    &.font-bolder {
      font-weight: var(--eds-typography-ui-body-sm-font-weight-bolder);
    }

    &.tracking-tight {
      letter-spacing: var(--eds-typography-ui-body-sm-tracking-tight);
    }

    &.tracking-normal {
      letter-spacing: var(--eds-typography-ui-body-sm-tracking-normal);
    }

    &.tracking-wide {
      letter-spacing: var(--eds-typography-ui-body-sm-tracking-loose);
    }
  }

  &.text-md {
    --font-size: var(--eds-typography-ui-body-md-font-size);
    font-size: var(--font-size);

    &.line-height-default {
      line-height: var(--eds-typography-ui-body-md-lineheight-default);
    }

    &.line-height-squished {
      line-height: var(--eds-typography-ui-body-md-lineheight-squished);
    }

    &.font-lighter {
      font-weight: var(--eds-typography-ui-body-md-font-weight-lighter);
    }

    &.font-normal {
      font-weight: var(--eds-typography-ui-body-md-font-weight-normal);
    }

    &.font-bolder {
      font-weight: var(--eds-typography-ui-body-md-font-weight-bolder);
    }

    &.tracking-tight {
      letter-spacing: var(--eds-typography-ui-body-md-tracking-tight);
    }

    &.tracking-normal {
      letter-spacing: var(--eds-typography-ui-body-md-tracking-normal);
    }

    &.tracking-wide {
      letter-spacing: var(--eds-typography-ui-body-md-tracking-loose);
    }
  }

  &.text-lg {
    --font-size: var(--eds-typography-ui-body-lg-font-size);
    font-size: var(--font-size);

    &.line-height-default {
      line-height: var(--eds-typography-ui-body-lg-lineheight-default);
    }

    &.line-height-squished {
      line-height: var(--eds-typography-ui-body-lg-lineheight-squished);
    }

    &.font-lighter {
      font-weight: var(--eds-typography-ui-body-lg-font-weight-lighter);
    }

    &.font-normal {
      font-weight: var(--eds-typography-ui-body-lg-font-weight-normal);
    }

    &.font-bolder {
      font-weight: var(--eds-typography-ui-body-lg-font-weight-bolder);
    }

    &.tracking-tight {
      letter-spacing: var(--eds-typography-ui-body-lg-tracking-tight);
    }

    &.tracking-normal {
      letter-spacing: var(--eds-typography-ui-body-lg-tracking-normal);
    }

    &.tracking-wide {
      letter-spacing: var(--eds-typography-ui-body-lg-tracking-loose);
    }
  }

  &.text-xl {
    --font-size: var(--eds-typography-ui-body-xl-font-size);
    font-size: var(--font-size);

    &.line-height-default {
      line-height: var(--eds-typography-ui-body-xl-lineheight-default);
    }

    &.line-height-squished {
      line-height: var(--eds-typography-ui-body-xl-lineheight-squished);
    }

    &.font-lighter {
      font-weight: var(--eds-typography-ui-body-xl-font-weight-lighter);
    }

    &.font-normal {
      font-weight: var(--eds-typography-ui-body-xl-font-weight-normal);
    }

    &.font-bolder {
      font-weight: var(--eds-typography-ui-body-xl-font-weight-bolder);
    }

    &.tracking-tight {
      letter-spacing: var(--eds-typography-ui-body-xl-tracking-tight);
    }

    &.tracking-normal {
      letter-spacing: var(--eds-typography-ui-body-xl-tracking-normal);
    }

    &.tracking-wide {
      letter-spacing: var(--eds-typography-ui-body-xl-tracking-loose);
    }
  }

  &.text-2xl {
    --font-size: var(--eds-typography-ui-body-2xl-font-size);
    font-size: var(--font-size);

    &.line-height-default {
      line-height: var(--eds-typography-ui-body-2xl-lineheight-default);
    }

    &.line-height-squished {
      line-height: var(--eds-typography-ui-body-2xl-lineheight-squished);
    }

    &.font-lighter {
      font-weight: var(--eds-typography-ui-body-2xl-font-weight-lighter);
    }

    &.font-normal {
      font-weight: var(--eds-typography-ui-body-2xl-font-weight-normal);
    }

    &.font-bolder {
      font-weight: var(--eds-typography-ui-body-2xl-font-weight-bolder);
    }

    &.tracking-tight {
      letter-spacing: var(--eds-typography-ui-body-2xl-tracking-tight);
    }

    &.tracking-normal {
      letter-spacing: var(--eds-typography-ui-body-2xl-tracking-normal);
    }

    &.tracking-wide {
      letter-spacing: var(--eds-typography-ui-body-2xl-tracking-loose);
    }
  }

  &.text-3xl {
    --font-size: var(--eds-typography-ui-body-3xl-font-size);
    font-size: var(--font-size);

    &.line-height-default {
      line-height: var(--eds-typography-ui-body-3xl-lineheight-default);
    }

    &.line-height-squished {
      line-height: var(--eds-typography-ui-body-3xl-lineheight-squished);
    }

    &.font-lighter {
      font-weight: var(--eds-typography-ui-body-3xl-font-weight-lighter);
    }

    &.font-normal {
      font-weight: var(--eds-typography-ui-body-3xl-font-weight-normal);
    }

    &.font-bolder {
      font-weight: var(--eds-typography-ui-body-3xl-font-weight-bolder);
    }

    &.tracking-tight {
      letter-spacing: var(--eds-typography-ui-body-3xl-tracking-tight);
    }

    &.tracking-normal {
      letter-spacing: var(--eds-typography-ui-body-3xl-tracking-normal);
    }

    &.tracking-wide {
      letter-spacing: var(--eds-typography-ui-body-3xl-tracking-loose);
    }
  }

  &.text-4xl {
    --font-size: var(--eds-typography-ui-body-4xl-font-size);
    font-size: var(--font-size);

    &.line-height-default {
      line-height: var(--eds-typography-ui-body-4xl-lineheight-default);
    }

    &.line-height-squished {
      line-height: var(--eds-typography-ui-body-4xl-lineheight-squished);
    }

    &.font-lighter {
      font-weight: var(--eds-typography-ui-body-4xl-font-weight-lighter);
    }

    &.font-normal {
      font-weight: var(--eds-typography-ui-body-4xl-font-weight-normal);
    }

    &.font-bolder {
      font-weight: var(--eds-typography-ui-body-4xl-font-weight-bolder);
    }

    &.tracking-tight {
      letter-spacing: var(--eds-typography-ui-body-4xl-tracking-tight);
    }

    &.tracking-normal {
      letter-spacing: var(--eds-typography-ui-body-4xl-tracking-normal);
    }

    &.tracking-wide {
      letter-spacing: var(--eds-typography-ui-body-4xl-tracking-loose);
    }
  }

  &.text-5xl {
    --font-size: var(--eds-typography-ui-body-5xl-font-size);
    font-size: var(--font-size);

    &.line-height-default {
      line-height: var(--eds-typography-ui-body-5xl-lineheight-default);
    }

    &.line-height-squished {
      line-height: var(--eds-typography-ui-body-5xl-lineheight-squished);
    }

    &.font-lighter {
      font-weight: var(--eds-typography-ui-body-5xl-font-weight-lighter);
    }

    &.font-normal {
      font-weight: var(--eds-typography-ui-body-5xl-font-weight-normal);
    }

    &.font-bolder {
      font-weight: var(--eds-typography-ui-body-5xl-font-weight-bolder);
    }

    &.tracking-tight {
      letter-spacing: var(--eds-typography-ui-body-5xl-tracking-tight);
    }

    &.tracking-normal {
      letter-spacing: var(--eds-typography-ui-body-5xl-tracking-normal);
    }

    &.tracking-wide {
      letter-spacing: var(--eds-typography-ui-body-5xl-tracking-loose);
    }
  }

  &.text-6xl {
    --font-size: var(--eds-typography-ui-body-6xl-font-size);
    font-size: var(--font-size);

    &.line-height-default {
      line-height: var(--eds-typography-ui-body-6xl-lineheight-default);
    }

    &.line-height-squished {
      line-height: var(--eds-typography-ui-body-6xl-lineheight-squished);
    }

    &.font-lighter {
      font-weight: var(--eds-typography-ui-body-6xl-font-weight-lighter);
    }

    &.font-normal {
      font-weight: var(--eds-typography-ui-body-6xl-font-weight-normal);
    }

    &.font-bolder {
      font-weight: var(--eds-typography-ui-body-6xl-font-weight-bolder);
    }

    &.tracking-tight {
      letter-spacing: var(--eds-typography-ui-body-6xl-tracking-tight);
    }

    &.tracking-normal {
      letter-spacing: var(--eds-typography-ui-body-6xl-tracking-normal);
    }

    &.tracking-wide {
      letter-spacing: var(--eds-typography-ui-body-6xl-tracking-loose);
    }
  }
}

.font-family-header {
  font-family: var(--eds-typography-header-font-family), sans-serif;

  &.text-xs {
    --font-size: var(--eds-typography-header-xs-font-size);
    font-size: var(--font-size);

    &.line-height-default {
      line-height: var(--eds-typography-header-xs-lineheight-default);
    }

    &.line-height-squished {
      line-height: var(--eds-typography-header-xs-lineheight-squished);
    }

    &.font-lighter {
      font-weight: var(--eds-typography-header-xs-font-weight-lighter);
    }

    &.font-normal {
      font-weight: var(--eds-typography-header-xs-font-weight-normal);
    }

    &.font-bolder {
      font-weight: var(--eds-typography-header-xs-font-weight-bolder);
    }

    &.tracking-tight {
      letter-spacing: var(--eds-typography-header-xs-tracking-tight);
    }

    &.tracking-normal {
      letter-spacing: var(--eds-typography-header-xs-tracking-normal);
    }

    &.tracking-wide {
      letter-spacing: var(--eds-typography-header-xs-tracking-loose);
    }
  }

  &.text-sm {
    --font-size: var(--eds-typography-header-sm-font-size);
    font-size: var(--font-size);

    &.line-height-default {
      line-height: var(--eds-typography-header-sm-lineheight-default);
    }

    &.line-height-squished {
      line-height: var(--eds-typography-header-sm-lineheight-squished);
    }

    &.font-lighter {
      font-weight: var(--eds-typography-header-sm-font-weight-lighter);
    }

    &.font-normal {
      font-weight: var(--eds-typography-header-sm-font-weight-normal);
    }

    &.font-bolder {
      font-weight: var(--eds-typography-header-sm-font-weight-bolder);
    }

    &.tracking-tight {
      letter-spacing: var(--eds-typography-header-sm-tracking-tight);
    }

    &.tracking-normal {
      letter-spacing: var(--eds-typography-header-sm-tracking-normal);
    }

    &.tracking-wide {
      letter-spacing: var(--eds-typography-header-sm-tracking-loose);
    }
  }

  &.text-md {
    --font-size: var(--eds-typography-header-md-font-size);
    font-size: var(--font-size);

    &.line-height-default {
      line-height: var(--eds-typography-header-md-lineheight-default);
    }

    &.line-height-squished {
      line-height: var(--eds-typography-header-md-lineheight-squished);
    }

    &.font-lighter {
      font-weight: var(--eds-typography-header-md-font-weight-lighter);
    }

    &.font-normal {
      font-weight: var(--eds-typography-header-md-font-weight-normal);
    }

    &.font-bolder {
      font-weight: var(--eds-typography-header-md-font-weight-bolder);
    }

    &.tracking-tight {
      letter-spacing: var(--eds-typography-header-md-tracking-tight);
    }

    &.tracking-normal {
      letter-spacing: var(--eds-typography-header-md-tracking-normal);
    }

    &.tracking-wide {
      letter-spacing: var(--eds-typography-header-md-tracking-loose);
    }
  }

  &.text-lg {
    --font-size: var(--eds-typography-header-lg-font-size);
    font-size: var(--font-size);

    &.line-height-default {
      line-height: var(--eds-typography-header-lg-lineheight-default);
    }

    &.line-height-squished {
      line-height: var(--eds-typography-header-lg-lineheight-squished);
    }

    &.font-lighter {
      font-weight: var(--eds-typography-header-lg-font-weight-lighter);
    }

    &.font-normal {
      font-weight: var(--eds-typography-header-lg-font-weight-normal);
    }

    &.font-bolder {
      font-weight: var(--eds-typography-header-lg-font-weight-bolder);
    }

    &.tracking-tight {
      letter-spacing: var(--eds-typography-header-lg-tracking-tight);
    }

    &.tracking-normal {
      letter-spacing: var(--eds-typography-header-lg-tracking-normal);
    }

    &.tracking-wide {
      letter-spacing: var(--eds-typography-header-lg-tracking-loose);
    }
  }

  &.text-xl {
    --font-size: var(--eds-typography-header-xl-font-size);
    font-size: var(--font-size);

    &.line-height-default {
      line-height: var(--eds-typography-header-xl-lineheight-default);
    }

    &.line-height-squished {
      line-height: var(--eds-typography-header-xl-lineheight-squished);
    }

    &.font-lighter {
      font-weight: var(--eds-typography-header-xl-font-weight-lighter);
    }

    &.font-normal {
      font-weight: var(--eds-typography-header-xl-font-weight-normal);
    }

    &.font-bolder {
      font-weight: var(--eds-typography-header-xl-font-weight-bolder);
    }

    &.tracking-tight {
      letter-spacing: var(--eds-typography-header-xl-tracking-tight);
    }

    &.tracking-normal {
      letter-spacing: var(--eds-typography-header-xl-tracking-normal);
    }

    &.tracking-wide {
      letter-spacing: var(--eds-typography-header-xl-tracking-loose);
    }
  }

  &.text-2xl {
    --font-size: var(--eds-typography-header-2xl-font-size);
    font-size: var(--font-size);

    &.line-height-default {
      line-height: var(--eds-typography-header-2xl-lineheight-default);
    }

    &.line-height-squished {
      line-height: var(--eds-typography-header-2xl-lineheight-squished);
    }

    &.font-lighter {
      font-weight: var(--eds-typography-header-2xl-font-weight-lighter);
    }

    &.font-normal {
      font-weight: var(--eds-typography-header-2xl-font-weight-normal);
    }

    &.font-bolder {
      font-weight: var(--eds-typography-header-2xl-font-weight-bolder);
    }

    &.tracking-tight {
      letter-spacing: var(--eds-typography-header-2xl-tracking-tight);
    }

    &.tracking-normal {
      letter-spacing: var(--eds-typography-header-2xl-tracking-normal);
    }

    &.tracking-wide {
      letter-spacing: var(--eds-typography-header-2xl-tracking-loose);
    }
  }

  &.text-3xl {
    --font-size: var(--eds-typography-header-3xl-font-size);
    font-size: var(--font-size);

    &.line-height-default {
      line-height: var(--eds-typography-header-3xl-lineheight-default);
    }

    &.line-height-squished {
      line-height: var(--eds-typography-header-3xl-lineheight-squished);
    }

    &.font-lighter {
      font-weight: var(--eds-typography-header-3xl-font-weight-lighter);
    }

    &.font-normal {
      font-weight: var(--eds-typography-header-3xl-font-weight-normal);
    }

    &.font-bolder {
      font-weight: var(--eds-typography-header-3xl-font-weight-bolder);
    }

    &.tracking-tight {
      letter-spacing: var(--eds-typography-header-3xl-tracking-tight);
    }

    &.tracking-normal {
      letter-spacing: var(--eds-typography-header-3xl-tracking-normal);
    }

    &.tracking-wide {
      letter-spacing: var(--eds-typography-header-3xl-tracking-loose);
    }
  }

  &.text-4xl {
    --font-size: var(--eds-typography-header-4xl-font-size);
    font-size: var(--font-size);

    &.line-height-default {
      line-height: var(--eds-typography-header-4xl-lineheight-default);
    }

    &.line-height-squished {
      line-height: var(--eds-typography-header-4xl-lineheight-squished);
    }

    &.font-lighter {
      font-weight: var(--eds-typography-header-4xl-font-weight-lighter);
    }

    &.font-normal {
      font-weight: var(--eds-typography-header-4xl-font-weight-normal);
    }

    &.font-bolder {
      font-weight: var(--eds-typography-header-4xl-font-weight-bolder);
    }

    &.tracking-tight {
      letter-spacing: var(--eds-typography-header-4xl-tracking-tight);
    }

    &.tracking-normal {
      letter-spacing: var(--eds-typography-header-4xl-tracking-normal);
    }

    &.tracking-wide {
      letter-spacing: var(--eds-typography-header-4xl-tracking-loose);
    }
  }

  &.text-5xl {
    --font-size: var(--eds-typography-header-5xl-font-size);
    font-size: var(--font-size);

    &.line-height-default {
      line-height: var(--eds-typography-header-5xl-lineheight-default);
    }

    &.line-height-squished {
      line-height: var(--eds-typography-header-5xl-lineheight-squished);
    }

    &.font-lighter {
      font-weight: var(--eds-typography-header-5xl-font-weight-lighter);
    }

    &.font-normal {
      font-weight: var(--eds-typography-header-5xl-font-weight-normal);
    }

    &.font-bolder {
      font-weight: var(--eds-typography-header-5xl-font-weight-bolder);
    }

    &.tracking-tight {
      letter-spacing: var(--eds-typography-header-5xl-tracking-tight);
    }

    &.tracking-normal {
      letter-spacing: var(--eds-typography-header-5xl-tracking-normal);
    }

    &.tracking-wide {
      letter-spacing: var(--eds-typography-header-5xl-tracking-loose);
    }
  }

  &.text-6xl {
    --font-size: var(--eds-typography-header-6xl-font-size);
    font-size: var(--font-size);

    &.line-height-default {
      line-height: var(--eds-typography-header-6xl-lineheight-default);
    }

    &.line-height-squished {
      line-height: var(--eds-typography-header-6xl-lineheight-squished);
    }

    &.font-lighter {
      font-weight: var(--eds-typography-header-6xl-font-weight-lighter);
    }

    &.font-normal {
      font-weight: var(--eds-typography-header-6xl-font-weight-normal);
    }

    &.font-bolder {
      font-weight: var(--eds-typography-header-6xl-font-weight-bolder);
    }

    &.tracking-tight {
      letter-spacing: var(--eds-typography-header-6xl-tracking-tight);
    }

    &.tracking-normal {
      letter-spacing: var(--eds-typography-header-6xl-tracking-normal);
    }

    &.tracking-wide {
      letter-spacing: var(--eds-typography-header-6xl-tracking-loose);
    }
  }
}

/* Baseline alignment - progressive enhancement with text-box-trim */
@supports (text-box: trim-both cap alphabetic) {
  .text-baseline-grid {
    text-box: trim-both ex alphabetic;
    /* 
     * Goal: Align text to the 4px baseline grid for consistent vertical rhythm
     * 
     * This ensures all text elements align to a consistent baseline across the page,
     * creating visual harmony and structure throughout the interface.
     * 
     * How it works:
     * - text-box: trim-both ex alphabetic removes browser's default line-height spacing
     * - padding-top: Adds calculated space to snap the baseline to the nearest 4px grid line
     * - padding-bottom: 0 keeps the bottom edge tight to the alphabetic baseline
     * - round(1cap, 4px): Rounds cap height to the nearest 4px for grid alignment
     * 
     * Result: Text baselines align to 4px intervals (0px, 4px, 8px, 12px, etc.)
     * This makes spacing between text elements predictable and visually balanced.
     */
    padding-top: calc(round(1cap, 4px) - 1ex);
    padding-bottom: 0;
  }

  .text-baseline-center {
    text-box: trim-both ex alphabetic;
    /* 
     * Goal: Keep the total height of the text element aligned to the 4px baseline grid
     * 
     * This padding calculation ensures that after trimming the text box, the total
     * element height (text + padding) is a multiple of 4px. This maintains visual
     * consistency with the rest of the design system's vertical rhythm.
     * 
     * How it works:
     * - round(1cap, 4px): Rounds the cap height to nearest 4px increment
     * - We adjust padding to compensate for the difference between cap and x-height
     * - Padding is distributed evenly above and below for optical centering
     * 
     * Result: Total height snaps to 4px grid (16px, 20px, 24px, etc.) while
     * maintaining centered appearance within UI elements like buttons and badges.
     */
    padding-top: calc((round(1cap, 4px) - 1ex) / 2 + (1cap - 1ex) / 2);
    padding-bottom: calc((round(1cap, 4px) - 1ex) / 2 - (1cap - 1ex) / 2);
  }
}

/* Icon sizing within text elements - adjusts based on font-size */
.text-icon {
  width: calc(24px * tan(atan2(var(--font-size), 1px)) / 16);
  height: auto;
  font-size: calc(24px * tan(atan2(var(--font-size), 1px)) / 16);
  margin-block: -0.5em;
  margin-inline: -0.2em;
}
