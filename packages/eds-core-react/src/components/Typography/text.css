/* TODO: Update to reference the font-size, line-height and font-weight design tokens from @eds-tokens/variables */

@import url('https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap');

@property --font-size {
  inherits: true;
  initial-value: 16px;
  syntax: <length>;
}

/* Composite typography styles - reset browser defaults */
.h1,
.h2,
.h3,
.h4,
.h5,
.h6,
.body-large,
.body,
.body-small,
.caption,
.overline {
  margin: 0;
}

:root {
  /* Font sizes */
  --font-size-xs: 10.5px;
  --font-size-sm: 12px;
  --font-size-md: 14px;
  --font-size-lg: 16px;
  --font-size-xl: 18px;
  --font-size-2xl: 20px;
  --font-size-3xl: 24px;
  --font-size-4xl: 32px;
  --font-size-5xl: 40px;
  --font-size-6xl: 48px;

  /* Line heights - default (comfortable) */
  --line-height-xs-default: 16px;
  --line-height-sm-default: 16px;
  --line-height-md-default: 20px;
  --line-height-lg-default: 24px;
  --line-height-xl-default: 28px;
  --line-height-2xl-default: 28px;
  --line-height-3xl-default: 32px;
  --line-height-4xl-default: 40px;
  --line-height-5xl-default: 48px;
  --line-height-6xl-default: 56px;

  /* Line heights - squished (compact) */
  --line-height-xs-squished: 12px;
  --line-height-sm-squished: 12px;
  --line-height-md-squished: 16px;
  --line-height-lg-squished: 20px;
  --line-height-xl-squished: 24px;
  --line-height-2xl-squished: 24px;
  --line-height-3xl-squished: 28px;
  --line-height-4xl-squished: 36px;
  --line-height-5xl-squished: 44px;
  --line-height-6xl-squished: 52px;
}

/* Base typography styles */
.text {
  margin: 0;
  font-family: Inter, sans-serif;
}

/* Font size classes with default line heights */
.text-xs {
  --font-size: var(--font-size-xs);
  font-size: var(--font-size);
  line-height: var(--line-height-xs-default);

  &.line-height-squished {
    line-height: var(--line-height-xs-squished);
  }
}

.text-sm {
  --font-size: var(--font-size-sm);
  font-size: var(--font-size);
  line-height: var(--line-height-sm-default);

  &.line-height-squished {
    line-height: var(--line-height-sm-squished);
  }
}

.text-md {
  --font-size: var(--font-size-md);
  font-size: var(--font-size);
  line-height: var(--line-height-md-default);

  &.line-height-squished {
    line-height: var(--line-height-md-squished);
  }
}

.text-lg {
  --font-size: var(--font-size-lg);
  font-size: var(--font-size);
  line-height: var(--line-height-lg-default);

  &.line-height-squished {
    line-height: var(--line-height-lg-squished);
  }
}

.text-xl {
  --font-size: var(--font-size-xl);
  font-size: var(--font-size);
  line-height: var(--line-height-xl-default);

  &.line-height-squished {
    line-height: var(--line-height-xl-squished);
  }
}

.text-2xl {
  --font-size: var(--font-size-2xl);
  font-size: var(--font-size);
  line-height: var(--line-height-2xl-default);

  &.line-height-squished {
    line-height: var(--line-height-2xl-squished);
  }
}

.text-3xl {
  --font-size: var(--font-size-3xl);
  font-size: var(--font-size);
  line-height: var(--line-height-3xl-default);

  &.line-height-squished {
    line-height: var(--line-height-3xl-squished);
  }
}

.text-4xl {
  --font-size: var(--font-size-4xl);
  font-size: var(--font-size);
  line-height: var(--line-height-4xl-default);

  &.line-height-squished {
    line-height: var(--line-height-4xl-squished);
  }
}

.text-5xl {
  --font-size: var(--font-size-5xl);
  font-size: var(--font-size);
  line-height: var(--line-height-5xl-default);

  &.line-height-squished {
    line-height: var(--line-height-5xl-squished);
  }
}

.text-6xl {
  --font-size: var(--font-size-6xl);
  font-size: var(--font-size);
  line-height: var(--line-height-6xl-default);

  &.line-height-squished {
    line-height: var(--line-height-6xl-squished);
  }
}

/* Font weight variants */
.font-lighter {
  font-weight: 300;
}

.font-normal {
  font-weight: 400;
}

.font-bolder {
  font-weight: 600;
}

/* Baseline alignment - progressive enhancement with text-box-trim */
@supports (text-box: trim-both cap alphabetic) {
  .text-baseline-grid,
  .h1,
  .h2,
  .h3,
  .h4,
  .h5,
  .h6,
  .body-large,
  .body,
  .body-small,
  .caption,
  .overline {
    text-box: trim-both ex alphabetic;
    /* 
     * Goal: Align text to the 4px baseline grid for consistent vertical rhythm
     * 
     * This ensures all text elements align to a consistent baseline across the page,
     * creating visual harmony and structure throughout the interface.
     * 
     * How it works:
     * - text-box: trim-both ex alphabetic removes browser's default line-height spacing
     * - padding-top: Adds calculated space to snap the baseline to the nearest 4px grid line
     * - padding-bottom: 0 keeps the bottom edge tight to the alphabetic baseline
     * - round(1cap, 4px): Rounds cap height to the nearest 4px for grid alignment
     * 
     * Result: Text baselines align to 4px intervals (0px, 4px, 8px, 12px, etc.)
     * This makes spacing between text elements predictable and visually balanced.
     */
    padding-top: calc(round(1cap, 4px) - 1ex);
    padding-bottom: 0;
  }

  .text-baseline-center {
    text-box: trim-both ex alphabetic;
    /* 
     * Goal: Keep the total height of the text element aligned to the 4px baseline grid
     * 
     * This padding calculation ensures that after trimming the text box, the total
     * element height (text + padding) is a multiple of 4px. This maintains visual
     * consistency with the rest of the design system's vertical rhythm.
     * 
     * How it works:
     * - round(1cap, 4px): Rounds the cap height to nearest 4px increment
     * - We adjust padding to compensate for the difference between cap and x-height
     * - Padding is distributed evenly above and below for optical centering
     * 
     * Result: Total height snaps to 4px grid (16px, 20px, 24px, etc.) while
     * maintaining centered appearance within UI elements like buttons and badges.
     */
    padding-top: calc((round(1cap, 4px) - 1ex) / 2 + (1cap - 1ex) / 2);
    padding-bottom: calc((round(1cap, 4px) - 1ex) / 2 - (1cap - 1ex) / 2);
  }
}

/* Debug helper */
.text[data-debug] {
  background: color-mix(in oklch, limegreen, transparent 70%);
}

/* Icon sizing within text elements - adjusts based on font-size */
.text,
.text-xs,
.text-sm,
.text-md,
.text-lg,
.text-xl,
.text-2xl,
.text-3xl,
.text-4xl,
.text-5xl,
.text-6xl {
  & .icon {
    width: calc(24px * tan(atan2(var(--font-size), 1px)) / 16);
    font-size: calc(24px * tan(atan2(var(--font-size), 1px)) / 16);
    margin-block: -0.5em;
    margin-inline: -0.2em;
  }
}

/* Composite typography styles */
.h1 {
  font-size: var(--font-size-6xl);
  line-height: var(--line-height-6xl-default);
  font-weight: 600;
}

.h2 {
  font-size: var(--font-size-5xl);
  line-height: var(--line-height-5xl-default);
  font-weight: 600;
}

.h3 {
  font-size: var(--font-size-4xl);
  line-height: var(--line-height-4xl-default);
  font-weight: 600;
}

.h4 {
  font-size: var(--font-size-3xl);
  line-height: var(--line-height-3xl-default);
  font-weight: 600;
}

.h5 {
  font-size: var(--font-size-2xl);
  line-height: var(--line-height-2xl-default);
  font-weight: 600;
}

.h6 {
  font-size: var(--font-size-xl);
  line-height: var(--line-height-xl-default);
  font-weight: 600;
}

.body-large {
  font-size: var(--font-size-lg);
  line-height: var(--line-height-lg-default);
  font-weight: 400;
}

.body {
  font-size: var(--font-size-md);
  line-height: var(--line-height-md-default);
  font-weight: 400;
}

.body-small {
  font-size: var(--font-size-sm);
  line-height: var(--line-height-sm-default);
  font-weight: 400;
}

.caption {
  font-size: var(--font-size-xs);
  line-height: var(--line-height-xs-default);
  font-weight: 400;
}

.overline {
  font-size: var(--font-size-sm);
  line-height: var(--line-height-sm-default);
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.05em;
}
