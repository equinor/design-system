/* EDS 2.0 Typography System */

@import url("https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap");

/* Define CSS custom property for font-size that can be inherited */
@property --font-size {
  inherits: true;
  initial-value: 16px;
  syntax: "<length>";
}

:root {
  /* Boolean-like toggles using space toggle technique */
  --FALSE: initial;
  --TRUE: ;

  /* State toggles for font sizes and line heights */
  --is-not-baseline-aligned: var(--FALSE);
  --is-line-height-squished: var(--FALSE);
  --is-font-size-xs: var(--FALSE);
  --is-font-size-sm: var(--FALSE);
  --is-font-size-md: var(--FALSE);
  --is-font-size-lg: var(--FALSE);
  --is-font-size-xl: var(--FALSE);

  /* Font size tokens from EDS (comfortable mode) */
  --font-size-xs: 0.563rem; /* ~9px */
  --font-size-sm: 0.656rem; /* ~10.5px */
  --font-size-md: 0.75rem; /* 12px */
  --font-size-lg: 0.875rem; /* 14px */
  --font-size-xl: 1rem; /* 16px */

  /* Normal line heights (comfortable mode) */
  --font-size-xs-line-height-normal: 0.75rem; /* 12px */
  --font-size-sm-line-height-normal: 1rem; /* 16px */
  --font-size-md-line-height-normal: 1rem; /* 16px */
  --font-size-lg-line-height-normal: 1.25rem; /* 20px */
  --font-size-xl-line-height-normal: 1.5rem; /* 24px */

  /* Squished line heights (comfortable mode) */
  --font-size-xs-line-height-squished: 0.75rem; /* 12px */
  --font-size-sm-line-height-squished: 0.75rem; /* 12px */
  --font-size-md-line-height-squished: 0.75rem; /* 12px */
  --font-size-lg-line-height-squished: 1rem; /* 16px */
  --font-size-xl-line-height-squished: 1.25rem; /* 20px */

  /* Font weights from EDS tokens */
  --font-weight-lighter: 300;
  --font-weight-normal: 400;
  --font-weight-bolder: 500;
}

/* ============================================ */
/* Data-attribute driven sizing */
/* ============================================ */

[data-font-size="xs"] {
  --is-font-size-xs: var(--TRUE);
}

[data-font-size="sm"] {
  --is-font-size-sm: var(--TRUE);
}

[data-font-size="md"] {
  --is-font-size-md: var(--TRUE);
}

[data-font-size="lg"] {
  --is-font-size-lg: var(--TRUE);
}

[data-font-size="xl"] {
  --is-font-size-xl: var(--TRUE);
}

[data-line-height="squished"] {
  --is-line-height-squished: var(--TRUE);
}

[data-not-baseline-aligned] {
  --is-not-baseline-aligned: var(--TRUE);
}

/* ============================================ */
/* Main typography class */
/* ============================================ */

.type {
  /* Space toggle based conditional values for font sizes */
  --_font-size-xs: var(--is-font-size-xs) var(--font-size-xs);
  --_font-size-sm: var(--is-font-size-sm) var(--font-size-sm);
  --_font-size-md: var(--is-font-size-md) var(--font-size-md);
  --_font-size-lg: var(--is-font-size-lg) var(--font-size-lg);
  --_font-size-xl: var(--is-font-size-xl) var(--font-size-xl);

  /* Helper to check if NOT font-size-sm */
  --_is-not-font-size-sm: var(--is-font-size-xs, var(--is-font-size-md, var(--is-font-size-lg, var(--is-font-size-xl))));

  /* Select the correct font size */
  --font-size: var(--_font-size-xs, var(--_font-size-sm, var(--_font-size-md, var(--_font-size-lg, var(--_font-size-xl)))));

  --_font-size: var(--font-size);

  /* Conditional line heights for squished mode */
  --_font-size-xs-line-height-squished: var(--is-line-height-squished) var(--font-size-xs-line-height-squished);
  --_font-size-sm-line-height-squished: var(--is-line-height-squished) var(--font-size-sm-line-height-squished);
  --_font-size-md-line-height-squished: var(--is-line-height-squished) var(--font-size-md-line-height-squished);
  --_font-size-lg-line-height-squished: var(--is-line-height-squished) var(--font-size-lg-line-height-squished);
  --_font-size-xl-line-height-squished: var(--is-line-height-squished) var(--font-size-xl-line-height-squished);

  /* Select the correct line height */
  --_font-size-xs-line-height: var(--is-font-size-xs) var(--_font-size-xs-line-height-squished, var(--font-size-xs-line-height-normal));
  --_font-size-sm-line-height: var(--is-font-size-sm) var(--_font-size-sm-line-height-squished, var(--font-size-sm-line-height-normal));
  --_font-size-md-line-height: var(--is-font-size-md) var(--_font-size-md-line-height-squished, var(--font-size-md-line-height-normal));
  --_font-size-lg-line-height: var(--is-font-size-lg) var(--_font-size-lg-line-height-squished, var(--font-size-lg-line-height-normal));
  --_font-size-xl-line-height: var(--is-font-size-xl) var(--_font-size-xl-line-height-squished, var(--font-size-xl-line-height-normal));

  /* Final line height value */
  --_line-height: var(--_font-size-xs-line-height, var(--_font-size-sm-line-height, var(--_font-size-md-line-height, var(--_font-size-lg-line-height, var(--_font-size-xl-line-height)))));

  /* ============================================ */
  /* Ratio-based padding for optical alignment */
  /* ============================================ */

  --_padding: calc(round(1cap, 4px) - 1ex);

  /* Centered padding for non-baseline-aligned text */
  --_padding-top-centered: var(--_is-not-font-size-sm) var(--is-not-baseline-aligned) calc(var(--_padding) / 2 + (1cap - 1ex) / 2);
  --_padding-bottom-centered: var(--_is-not-font-size-sm) var(--is-not-baseline-aligned) calc(var(--_padding) / 2 - (1cap - 1ex) / 2);

  /* Final padding values */
  --_padding-top: var(--_padding-top-centered, var(--_padding));
  --_padding-bottom: var(--_padding-bottom-centered, 0);

  /* Reset margin and default padding */
  margin: 0;
  padding: 0;

  /* Apply typography properties */
  font-family: Inter, sans-serif;
  font-size: var(--_font-size);
  line-height: var(--_line-height);

  /* ============================================ */
  /* Baseline grid alignment with text-box trim */
  /* ============================================ */

  /* Only add padding and text-box trim for baseline-aligned elements */
  &:not([data-not-baseline-aligned]) {
    @supports (text-box: trim-both cap alphabetic) {
      /* Trim whitespace above and below text */
      /* 'ex' aligns to x-height, 'alphabetic' to baseline */
      text-box: trim-both ex alphabetic;

      /* Apply calculated padding for baseline grid alignment */
      padding-top: var(--_padding-top);
      padding-bottom: var(--_padding-bottom);
    }
  }

  /* Debug mode */
  &[data-debug] {
    background: color-mix(in oklch, limegreen, transparent 70%);
  }
}

/* ============================================ */
/* Helper class for grid layouts */
/* ============================================ */

.grid {
  display: grid;
  gap: 20px;
}
